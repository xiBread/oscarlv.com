---
import { Image } from "astro:assets";
import { getCollection, getEntry } from "astro:content";
import Container from "../../components/container/Container.astro";
import Layout from "../../layouts/Layout.astro";
import url from "../../lib/url";

const entries = await getCollection("art");
const entry = await getEntry("single", "art");

const { Content } = await entry.render();
---

<Layout title="art">
	<Container class="mt-20">
		<article
			class="xyz-in prose prose-zinc max-w-3xl dark:prose-invert"
			xyz="fade up duration-10"
		>
			<h1 class="mb-8 text-5xl">{entry.data.title}</h1>
			<Content />
		</article>

		<ul
			class="mt-16 grid grid-cols-1 gap-14 sm:mt-24 sm:grid-cols-2 lg:grid-cols-3"
			xyz="fade up stagger delay-2"
			style="--xyz-duration: 1.5s"
		>
			{
				entries.map((entry) => (
					<li class="xyz-in group relative flex flex-col items-start">
						<Image
							src={url(entry.data.cover, 1024, 1024)}
							width={1024}
							height={1024}
							alt={entry.data.title}
							class="z-20 mb-6 aspect-square rounded-xl object-cover transition duration-300 sm:grayscale sm:group-hover:scale-105 sm:group-hover:filter-none"
						/>

						<div class="font-semibold text-zinc-800 dark:text-zinc-100">
							<div class="absolute -inset-x-4 -inset-y-6 z-0 scale-95 bg-zinc-300/50 opacity-0 transition duration-300 group-hover:scale-100 group-hover:opacity-100 dark:bg-zinc-800/50 sm:-inset-x-6 sm:rounded-2xl" />

							<a href={`/art/${entry.slug}`}>
								<span class="absolute -inset-x-4 -inset-y-6 z-20 sm:-inset-x-6 sm:rounded-2xl" />
								<span class="relative z-10">{entry.data.title}</span>
							</a>
						</div>

						<p class="relative z-10 mt-2 line-clamp-2 text-sm text-zinc-600 dark:text-zinc-400">
							{entry.data.description}
						</p>
					</li>
				))
			}
		</ul>
	</Container>
</Layout>
